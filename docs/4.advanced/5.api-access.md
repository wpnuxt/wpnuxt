# API Access

## WordPress Security Plugins

If you have a security plugin installed on your WordPress site (such as Wordfence), access to the `/graphql` endpoint may be blocked by default. This will prevent WPNuxt from fetching content from your WordPress installation.

## Troubleshooting Blocked GraphQL Access

### Symptoms

You may see 403 Forbidden errors in your logs or when attempting to access content:

```bash
x.x.x.x - - [07/Apr/2025:10:52:09 +0200] "POST /graphql HTTP/1.1" 403 17004 "-" "node"
```

### Solution for Wordfence

If you're using Wordfence, follow these steps:

1. **Enable Learning Mode**

   Put Wordfence in Learning Mode to allow it to observe legitimate traffic patterns:
   - Navigate to the Wordfence settings
   - Enable [Learning Mode](https://www.wordfence.com/help/firewall/learning-mode/)

2. **Whitelist GraphQL Requests**

   - Go to Wordfence Live Traffic view: `https://your-wordpress-site.com/wp-admin/admin.php?page=WordfenceTools`
   - Find the blocked calls to `/graphql` in the traffic log
   - Click "Add param to firewall allowlist" for each blocked GraphQL request

3. **Alternative: Whitelist by IP Address**

   If you know the IP address of your Nuxt application server, you can whitelist it directly in Wordfence settings.

### Other Security Plugins

For other security plugins (e.g., Sucuri, iThemes Security, All In One WP Security), consult their documentation to:

- Whitelist the `/graphql` endpoint
- Allow POST requests to `/graphql`
- Whitelist your application server's IP address

## Testing GraphQL Access

You can verify that GraphQL is accessible by running:

```bash
curl -X POST https://your-wordpress-site.com/graphql \
  -H "Content-Type: application/json" \
  -d '{"query": "{ generalSettings { title } }"}'
```

A successful response should return your site's general settings.
