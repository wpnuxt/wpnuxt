---
title: Fetching Data
description: Using WPNuxt composables
---

# Fetching Data

WPNuxt generates composables from GraphQL queries. Each query gets two versions:

- `use{Query}()` - Blocks navigation until data loads
- `useLazy{Query}()` - Navigates immediately, shows loading state

## Basic Usage

```vue
<script setup lang="ts">
const { data: posts, pending, error } = await usePosts()
</script>

<template>
  <div v-if="pending">Loading...</div>
  <div v-else-if="error">{{ error.message }}</div>
  <article v-for="post in posts" :key="post.id">
    <h2>{{ post.title }}</h2>
  </article>
</template>
```

## With Parameters

```ts
// By URI
const { data: post } = await usePostByUri({ uri: '/my-post' })

// By ID
const { data: page } = await usePageById({ id: '123' })

// With variables
const { data: posts } = await usePostsByCategoryName({
  categoryName: 'news'
})
```

## Lazy Loading

Use `useLazy*` for non-critical content:

```vue
<script setup lang="ts">
// Navigation happens immediately
const { data: posts, pending } = useLazyPosts()
</script>

<template>
  <div v-if="pending">Loading posts...</div>
  <PostList v-else :posts="posts" />
</template>
```

## Options

```ts
const { data } = usePosts(variables, {
  server: false,     // Skip SSR, fetch on client only
  lazy: true,        // Same as useLazyPosts()
  immediate: false,  // Don't fetch until execute() is called
  watch: [slug],     // Refetch when slug changes
})
```

## Refreshing Data

```ts
const { data, refresh } = usePosts()

// Manually refetch
await refresh()
```

## Available Composables

| Composable | Description |
|------------|-------------|
| `usePosts()` | All posts |
| `usePostByUri({ uri })` | Single post by slug |
| `usePostById({ id })` | Single post by ID |
| `usePostsByCategoryName({ categoryName })` | Posts in category |
| `usePages()` | All pages |
| `usePageByUri({ uri })` | Single page by slug |
| `useMenu({ name })` | Navigation menu |
| `useGeneralSettings()` | Site title, description |

All have `useLazy*` variants.
