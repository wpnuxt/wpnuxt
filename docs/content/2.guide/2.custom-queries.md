---
title: Custom Queries
description: Extend WPNuxt with your own GraphQL queries
---

# Custom Queries

Need data that default composables don't provide? Create custom queries.

## Create a Query

Add `.gql` files to `extend/queries/`:

```graphql [extend/queries/FeaturedPosts.gql]
query FeaturedPosts($limit: Int = 5) {
  posts(first: $limit, where: { tag: "featured" }) {
    nodes {
      ...Post
    }
  }
}
```

WPNuxt generates `useFeaturedPosts()` and `useLazyFeaturedPosts()` automatically.

## Use It

```vue
<script setup lang="ts">
const { data: featured } = await useFeaturedPosts({ limit: 3 })
</script>
```

Fully typed. No extra setup.

## Using Fragments

Reuse field selections with fragments:

```graphql [extend/queries/fragments/PostWithAuthor.fragment.gql]
fragment PostWithAuthor on Post {
  ...Post
  author {
    node {
      name
      avatar {
        url
      }
    }
  }
}
```

```graphql [extend/queries/AuthorPosts.gql]
query AuthorPosts($authorId: Int!) {
  posts(where: { author: $authorId }) {
    nodes {
      ...PostWithAuthor
    }
  }
}
```

## Override Default Queries

To modify a default query, create a file with the same name:

```graphql [extend/queries/Posts.gql]
query Posts($first: Int = 10) {
  posts(first: $first) {
    nodes {
      ...Post
      # Add your custom fields
      customField
      seo {
        title
        metaDesc
      }
    }
  }
}
```

Your version replaces the default.

## Folder Structure

```
extend/
└── queries/
    ├── FeaturedPosts.gql
    ├── AuthorPosts.gql
    └── fragments/
        └── PostWithAuthor.fragment.gql
```

## Regenerate Types

After adding queries, run:

```bash
pnpm dev:prepare
```

This regenerates composables and types.
