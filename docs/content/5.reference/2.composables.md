---
title: Composables
description: Composables API reference
---

# Composables

## Return Value

All composables return:

```ts
const {
  data,     // ComputedRef<T | undefined> - The fetched data
  pending,  // Ref<boolean> - Loading state
  error,    // Ref<Error | undefined> - Error if failed
  status,   // Ref<'idle' | 'pending' | 'success' | 'error'>
  refresh,  // () => Promise<void> - Refetch data
  execute,  // () => Promise<void> - Execute query
  clear,    // () => void - Clear data and error
} = usePosts()
```

## Options

```ts
usePosts(variables?, options?)
```

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `lazy` | `boolean` | `false` | Don't block navigation |
| `server` | `boolean` | `true` | Fetch during SSR |
| `immediate` | `boolean` | `true` | Fetch immediately |
| `watch` | `any[]` | — | Refetch when values change |
| `transform` | `(data) => T` | — | Transform response |

### Examples

```ts
// Client-only
usePosts(undefined, { server: false })

// Manual execution
const { execute } = usePosts(undefined, { immediate: false })
await execute()

// Watch reactive value
const category = ref('news')
usePosts({ categoryName: category }, { watch: [category] })

// Transform
usePosts(undefined, {
  transform: (posts) => posts?.map(p => p.title)
})
```

## Default Composables

### Posts

| Composable | Variables |
|------------|-----------|
| `usePosts()` | `{ first?: number }` |
| `usePostByUri()` | `{ uri: string }` |
| `usePostById()` | `{ id: string }` |
| `usePostsByCategoryName()` | `{ categoryName: string }` |
| `usePostsByCategoryId()` | `{ categoryId: number }` |

### Pages

| Composable | Variables |
|------------|-----------|
| `usePages()` | `{ first?: number }` |
| `usePageByUri()` | `{ uri: string }` |
| `usePageById()` | `{ id: string }` |

### Other

| Composable | Variables |
|------------|-----------|
| `useMenu()` | `{ name: string }` |
| `useNodeByUri()` | `{ uri: string }` |
| `useGeneralSettings()` | — |
| `useViewer()` | — |
| `useRevisions()` | `{ id: string }` |

### Lazy Variants

Every composable has a `useLazy*` variant:

```ts
useLazyPosts()
useLazyPostByUri({ uri })
useLazyPages()
// etc.
```

## Custom Composables

Create `.gql` files in `extend/queries/` to generate custom composables:

```graphql [extend/queries/FeaturedPosts.gql]
query FeaturedPosts($limit: Int = 5) {
  posts(first: $limit, where: { tag: "featured" }) {
    nodes { ...Post }
  }
}
```

Generates:
- `useFeaturedPosts({ limit })`
- `useLazyFeaturedPosts({ limit })`

## TypeScript

Types are auto-generated from your GraphQL schema:

```ts
import type { PostFragment } from '#graphql-operations'

const { data: posts } = usePosts()
// posts: ComputedRef<PostFragment[] | undefined>
```
